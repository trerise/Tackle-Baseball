import{nameGenerator,potGen,randStat,statGen,playerOverall,speedGen}from"../scripts/playernames.js";import fs from"fs";import{statblockAdder,individualStats,playerToObject,powerScore,teamToObject}from"../scripts/stats.js";import{randInt}from"../scripts/main.js";let regionEx=new RegExp(/region: (.+)/),seas=fs.readFileSync("./dist/src/tracker/tracker.txt","utf8"),season=Number(seas);function retirement(){let e=fs.readdirSync("./dist/src/players/free agents"),a=fs.readdirSync("./dist/src/teams"),t=[],n=[],r=[];for(let e=0;e<a.length;e++){let r=fs.readFileSync(`./dist/src/teams/${a[e]}`,"utf8"),s=(new RegExp(/age: (\d+)/),new RegExp(/name: (.+)/).exec(r)[1]),l=teamToObject(`${s}`),c=new RegExp("roster:[^]*stats:").exec(r)[0];c=c.replace("\nstats:",""),c=c.replace("roster:","");let i=new RegExp(/\S.*\S/g),o=c.match(i);for(let s=0;s<l.roster.length;s++){let c=l.roster[s].name.toString();0!==l.roster[s].number&&(c=c+" "+`${l.roster[s].number}`);let i=l.roster[s].age,p=i-28,f=Math.log2(i);p=Math.floor(p*f*Math.log10(i)),p*=10,p<=0?p=1:p>=1e3&&(p=900),randInt(0,1100)>p||(r=r.replace(`${c}\n`,""),fs.writeFileSync(`./dist/src/teams/${a[e]}`,r,{flag:"w"}),n.push(o[s]),t.push([c,i,l.name]))}}for(let a=0;a<e.length;a++){let n=fs.readdirSync(`./dist/src/players/free agents/${e[a]}`);for(let s=0;s<n.length;s++){let l,c=new RegExp(/(.+)(\d?\d?\d?).txt/),i=new RegExp(/(.+\d+).txt/),o=c.exec(n[s])[1],p=i.exec(n[s]);l=playerToObject(null!==p?p[1]:o,e[a]);let f=l.age,g=f-28,d=Math.log2(f);g=Math.floor(g*d*Math.log10(f)),g<=0&&(g=7),randInt(0,70)>g||(null!==i.exec(n[s])?r.push(i.exec(n[s])[1],e[a]):r.push([o,e[a]]),t.push([o,f,"Free Agent"]))}}for(let e=0;e<n.length;e++)fs.unlinkSync(`./dist/src/players/active/${n[e]}.txt`,(e=>{e&&console.log(e)}));for(let e=0;e<r.length;e++)fs.unlinkSync(`./dist/src/players/free agents/${r[e][1]}/${r[e][0]}.txt`,(e=>{e&&console.log(e)}));return t}function playerProgression(){let e=fs.readdirSync("./dist/src/players/active"),a=new RegExp(/(.+).txt/),t=[];for(let n=0;n<e.length;n++){let r=playerToObject(a.exec(e[n])[1]),s={name:r.name,power:r.power,speed:r.speed,eye:r.eye,tackle:r.tackle,breaktackle:r.breaktackle,block:r.block,breakblock:r.breakblock,awareness:r.awareness,age:r.age,potential:r.potential,overall:playerOverall(r)},l=[];r.age=r.age+1;let c=0,i=!1;if("F"==r.potential?c=28:"D"==r.potential?c=29:"C"==r.potential?c=30:"B"==r.potential?c=31:"A"==r.potential?c=33:"Star"==r.potential&&(c=35),r.age<c&&(i=!0),1==i){let e,a=Object.keys(r);for(let t=2;t<10;t++)"speed"!=a[t]&&(e="Star"==r.potential?randInt(3,7):"A"==r.potential?randInt(1,6):"B"==r.potential?randInt(0,4):"C"==r.potential?randInt(0,3):"D"==r.potential?randInt(0,2):randInt(0,1),r[a[t]]=r[a[t]]+e,r[a[t]]>99&&(r[a[t]]=99))}else{let e,a=Object.keys(r);for(let t=2;t<10;t++)e="A"==r.potential||"Star"==r.potential?randInt(0,1):"B"==r.potential?randInt(1,3):"C"==r.potential?randInt(1,4):"D"==r.potential?randInt(1,5):randInt(1,7),r[a[t]]=r[a[t]]-e,r[a[t]]<45&&(r[a[t]]=45)}let o=fs.readFileSync(`./dist/src/players/active/${e[n]}`,"utf8");o=o.replace(`  age: ${s.age}`,`  age: ${r.age}`),o=o.replace(`  power: ${s.power}`,`  power: ${r.power}`),o=o.replace(`  speed: ${s.speed}`,`  speed: ${r.speed}`),o=o.replace(`  eye: ${s.eye}`,`  eye: ${r.eye}`),o=o.replace(`  tackle: ${s.tackle}`,`  tackle: ${r.tackle}`),o=o.replace(`  breaktackle: ${s.breaktackle}`,`  breaktackle: ${r.breaktackle}`),o=o.replace(`  block: ${s.block}`,`  block: ${r.block}`),o=o.replace(`  breakblock: ${s.breakblock}`,`  breakblock: ${r.breakblock}`),o=o.replace(`  awareness: ${s.awareness}`,`  awareness: ${r.awareness}`),fs.writeFileSync(`./dist/src/players/active/${e[n]}`,o,{flag:"w"}),r.overall=playerOverall(r),l.push(s),l.push(r),t.push(l)}let n=fs.readdirSync("./dist/src/players/free agents");for(let e=0;e<n.length;e++){let t=fs.readdirSync(`./dist/src/players/free agents/${n[e]}`);for(let r=0;r<t.length;r++){let s,l=playerToObject(a.exec(t[r])[1],n[e]),c={name:l.name,power:l.power,speed:l.speed,eye:l.eye,tackle:l.tackle,breaktackle:l.breaktackle,block:l.block,breakblock:l.breakblock,awareness:l.awareness,age:l.age,potential:l.potential};l.age=l.age+1;let i=Object.keys(l);for(let e=1;e<8;e++)s="A"==l.potential?randInt(0,1):"B"==l.potential?randInt(1,3):"C"==l.potential?randInt(1,4):"D"==l.potential?randInt(1,5):randInt(1,7),l[i[e]]=l[i[e]]-s,l[i[e]]<45&&(l[i[e]]=45);let o=fs.readFileSync(`./dist/src/players/free agents/${n[e]}/${t[r]}`,"utf8");o=o.replace(`  age: ${c.age}`,`  age: ${l.age}`),o=o.replace(`  power: ${c.power}`,`  power: ${l.power}`),o=o.replace(`  speed: ${c.speed}`,`  speed: ${l.speed}`),o=o.replace(`  eye: ${c.eye}`,`  eye: ${l.eye}`),o=o.replace(`  tackle: ${c.tackle}`,`  tackle: ${l.tackle}`),o=o.replace(`  breaktackle: ${c.breaktackle}`,`  breaktackle: ${l.breaktackle}`),o=o.replace(`  block: ${c.block}`,`  block: ${l.block}`),o=o.replace(`  breakblock: ${c.breakblock}`,`  breakblock: ${l.breakblock}`),o=o.replace(`  awareness: ${c.awareness}`,`  awareness: ${l.awareness}`),fs.writeFileSync(`./dist/src/players/free agents/${n[e]}/${t[r]}`,o,{flag:"w"})}}return t}function createDraftClasses(){let e=fs.readdirSync("./dist/src/teams"),a={american:[],hispanic:[],chinese:[],japanese:[],italian:[],german:[],french:[],easterneuro:[],korean:[],vietnamese:[],indian:[],arabic:[],subsaharan:[],greek:[],scandinavian:[]};for(let t=0;t<e.length;t++){let n=fs.readFileSync(`./dist/src/teams/${e[t]}`,"utf8"),r=regionEx.exec(n)[1];for(let t=0;t<3;t++){let t=!1;1===randInt(0,8*e.length)&&(t=!0);let n={name:nameGenerator(r),power:statGen(t),speed:speedGen(t),eye:statGen(t),block:statGen(t),breakblock:statGen(t),tackle:statGen(t),breaktackle:statGen(t),awareness:statGen(t),age:randStat(20,23),overall:0,potential:potGen(t)};n.overall=playerOverall(n),a[r].push(n)}a[r]=a[r].sort(((e,a)=>a.overall-e.overall))}return a}function draft(e,a){let t=a,n=e,r=[t.american,t.hispanic,t.chinese,t.japanese,t.italian,t.german,t.french,t.easterneuro,t.korean,t.vietnamese,t.indian,t.arabic,t.subsaharan,t.greek,t.scandinavian],s=Object.keys(n),l=[],c=[];for(let e=0;e<2;e++)for(let a=0;a<r.length;a++)for(let t=0;t<r[a].length;t++){let i=rookieSelect(n[s[a]]);0===e?l.push([r[a][t],i,s[a]]):c.push([r[a][t],i,s[a]]);let o=n[s[a]].slice(0,n[s[a]].indexOf(i)),p=n[s[a]].slice(n[s[a]].indexOf(i)+1);n[s[a]]=o.concat(p)}for(let e=0;e<s.length;e++)for(let a=0;a<n[s[e]].length;a++)fs.writeFileSync(`./dist/src/players/free agents/${s[e]}/${n[s[e]][a].name}.txt`,`name: ${n[s[e]][a].name}\n  power: ${n[s[e]][a].power}\n  speed: ${n[s[e]][a].speed}\n  eye: ${n[s[e]][a].eye}\n  tackle: ${n[s[e]][a].tackle}\n  breaktackle: ${n[s[e]][a].breaktackle}\n  block: ${n[s[e]][a].block}\n  breakblock: ${n[s[e]][a].breakblock}\n  awareness: ${n[s[e]][a].awareness}\n  age: ${n[s[e]][a].age}\n  potential: ${n[s[e]][a].potential}\n\n\n\nstats:\nSeason ${season}:\n  Points Scored: 0\n  Assists: 0\n  Assist Points: 0\n  Broken Tackles: 0\n  Balls Fielded (OFF): 0\n  Blocks: 0\n  Turnovers: 0\n  Pitches: 0\n  Strikes: 0\n  Balls: 0\n  Fouls: 0\n  Strikeouts Pitching: 0\n  Ball Outs: 0\n  Slams Given: 0\n  At-Bats: 0\n  Hits: 0\n  Slams: 0\n  Hits to Out: 0\n  Hits to Offense: 0\n  Foulouts: 0\n  Strikeouts Batting: 0\n  Tackles: 0\n  Blocks Shed: 0\n  Interceptions: 0\n  Balls Fielded (DEF): 0\n  Total Outs Recorded: 0`,{flag:"w"});return[l,c,e]}function draftOrder(){let e={american:[],hispanic:[],chinese:[],japanese:[],italian:[],german:[],french:[],easterneuro:[],korean:[],vietnamese:[],indian:[],arabic:[],subsaharan:[],greek:[],scandinavian:[]},a={american:[],hispanic:[],chinese:[],japanese:[],italian:[],german:[],french:[],easterneuro:[],korean:[],vietnamese:[],indian:[],arabic:[],subsaharan:[],greek:[],scandinavian:[]},t={american:[],hispanic:[],chinese:[],japanese:[],italian:[],german:[],french:[],easterneuro:[],korean:[],vietnamese:[],indian:[],arabic:[],subsaharan:[],greek:[],scandinavian:[]},n={american:[],hispanic:[],chinese:[],japanese:[],italian:[],german:[],french:[],easterneuro:[],korean:[],vietnamese:[],indian:[],arabic:[],subsaharan:[],greek:[],scandinavian:[]},r={american:[],hispanic:[],chinese:[],japanese:[],italian:[],german:[],french:[],easterneuro:[],korean:[],vietnamese:[],indian:[],arabic:[],subsaharan:[],greek:[],scandinavian:[]},s=fs.readFileSync("./dist/src/records/Entry/Teams.txt","utf8"),l=fs.readFileSync("./dist/src/records/Middle/Teams.txt","utf8"),c=fs.readFileSync("./dist/src/records/Transitional/Teams.txt","utf8"),i=fs.readFileSync("./dist/src/records/Premier/Teams.txt","utf8"),o=new RegExp(/\b.+\b/g),p=s.match(o),f=l.match(o),g=c.match(o),d=i.match(o),k=[],h=[],m=[],$=[],b=new RegExp(/region: (.+)/);for(let e=0;e<p.length;e++){let t=fs.readFileSync(`./dist/src/teams/${p[e]}.txt`,"utf8");a[b.exec(t)[1]].push(p[e])}let u=Object.keys(a);for(let e=0;e<u.length;e++){for(let t=0;t<a[u[e]].length;t++){let n={name:a[u[e]][t],value:powerScore(a[u[e]][t],season)};k.push(n)}a[u[e]]=k.sort(((e,a)=>e.value-a.value)),k=[]}for(let e=0;e<f.length;e++){let a=fs.readFileSync(`./dist/src/teams/${f[e]}.txt`,"utf8");t[b.exec(a)[1]].push(f[e])}let y=Object.keys(t);for(let e=0;e<y.length;e++){for(let a=0;a<t[y[e]].length;a++){let n={name:t[y[e]][a],value:powerScore(t[y[e]][a],season)};h.push(n)}t[y[e]]=h.sort(((e,a)=>e.value-a.value)),h=[]}for(let e=0;e<g.length;e++){let a=fs.readFileSync(`./dist/src/teams/${g[e]}.txt`,"utf8");n[b.exec(a)[1]].push(g[e])}let w=Object.keys(n);for(let e=0;e<w.length;e++){for(let a=0;a<n[w[e]].length;a++){let t={name:n[w[e]][a],value:powerScore(n[w[e]][a],season)};m.push(t)}n[w[e]]=m.sort(((e,a)=>e.value-a.value)),m=[]}for(let e=0;e<d.length;e++){let a=fs.readFileSync(`./dist/src/teams/${d[e]}.txt`,"utf8");r[b.exec(a)[1]].push(d[e])}let x=Object.keys(r);for(let e=0;e<x.length;e++){for(let a=0;a<r[x[e]].length;a++){let t={name:r[x[e]][a],value:powerScore(r[x[e]][a],season)};$.push(t)}r[x[e]]=$.sort(((e,a)=>e.value-a.value)),$=[]}let S=Object.keys(r),v=[];for(let e=0;e<S.length;e++){for(let a=0;a<r[S[e]].length;a++)v.push(`${r[S[e]][a].name}`);r[S[e]]=v,v=[]}let F=Object.keys(n),O=[];for(let e=0;e<F.length;e++){for(let a=0;a<n[F[e]].length;a++)O.push(`${n[F[e]][a].name}`);n[F[e]]=O,O=[]}let j=Object.keys(t),E=[];for(let e=0;e<j.length;e++){for(let a=0;a<t[j[e]].length;a++)E.push(`${t[j[e]][a].name}`);t[j[e]]=E,E=[]}let T=Object.keys(a),I=[];for(let e=0;e<T.length;e++){for(let t=0;t<a[T[e]].length;t++)I.push(`${a[T[e]][t].name}`);a[T[e]]=I,I=[]}return e.american=a.american.concat(t.american.concat(n.american.concat(r.american))),e.hispanic=a.hispanic.concat(t.hispanic.concat(n.hispanic.concat(r.hispanic))),e.chinese=a.chinese.concat(t.chinese.concat(n.chinese.concat(r.chinese))),e.japanese=a.japanese.concat(t.japanese.concat(n.japanese.concat(r.japanese))),e.italian=a.italian.concat(t.italian.concat(n.italian.concat(r.italian))),e.german=a.german.concat(t.german.concat(n.german.concat(r.german))),e.french=a.french.concat(t.french.concat(n.french.concat(r.french))),e.easterneuro=a.easterneuro.concat(t.easterneuro.concat(n.easterneuro.concat(r.easterneuro))),e.korean=a.korean.concat(t.korean.concat(n.korean.concat(r.korean))),e.vietnamese=a.vietnamese.concat(t.vietnamese.concat(n.vietnamese.concat(r.vietnamese))),e.indian=a.indian.concat(t.indian.concat(n.indian.concat(r.indian))),e.arabic=a.arabic.concat(t.arabic.concat(n.arabic.concat(r.arabic))),e.subsaharan=a.subsaharan.concat(t.subsaharan.concat(n.subsaharan.concat(r.subsaharan))),e.greek=a.greek.concat(t.greek.concat(n.greek.concat(r.greek))),e.scandinavian=a.scandinavian.concat(t.scandinavian.concat(n.scandinavian.concat(r.scandinavian))),e}function rookieSelect(e){let a,t,n=[],r=[];if(a=0===randInt(0,1)?"win now":"win later","win now"==a){for(let a=0;a<e.length;a++)r.push(e[a]);r=r.sort(((e,a)=>a.overall-e.overall));let a=[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9]];for(let e=0;e<a.length;e++)if(null!=a[e]){let t=a[e].overall;"Star"==a[e].potential?t+=100:"A"==a[e].potential?t+=4:"B"==a[e].potential?t+=3:"C"==a[e].potential?t+=2:"D"==a[e].potential?t+=1:"F"==a[e].potential&&(t+=0),n.push(t)}else{let e=-1;n.push(e)}let s=[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]];s=s.sort(((e,a)=>a-e)),t=a[n.indexOf(s[0])]}else if("win later"==a){let a=[];for(let t=0;t<e.length;t++)"Star"!=e[t].potential&&"A"!=e[t].potential&&"B"!=e[t].potential||a.push(e[t]);if(0===a.length)for(let t=0;t<e.length;t++)"C"==e[t].potential&&a.push(e[t]);if(0===a.length)for(let t=0;t<e.length;t++)"D"==e[t].potential&&a.push(e[t]);if(0===a.length)for(let t=0;t<e.length;t++)"F"==e[t].potential&&a.push(e[t]);for(let e=0;e<a.length;e++){let t=Math.round(a[e].overall/10);"Star"==a[e].potential?t+=1e3:"A"==a[e].potential?t+=100:"B"==a[e].potential?t+=80:"C"==a[e].potential?t+=65:"D"==a[e].potential?t+=40:"F"==a[e].potential&&(t+=0),n.push(t)}let r=[];for(let e=0;e<n.length;e++)r.push(n[e]);r=r.sort(((e,a)=>a-e)),t=a[n.indexOf(r[0])]}return t}function signDraftees(e){let a=e[0],t=e[1],n=!1,r=[],s=[],l=[],c=[],i=fs.readdirSync("./dist/src/players/active"),o=new RegExp(/(.+).txt/),p="";for(let e=0;e<i.length;e++)p+=o.exec(i[e])[1];for(let e=0;e<a.length;e++){let t=teamToObject(a[e][0]);if(t.roster.length<6)n=!0,s.push([t.name,t.region,a[e][1].name,"Yes"]);else{let l=[];for(let e=0;e<t.roster.length;e++){let a=0,n=playerOverall(t.roster[e]),r=0;"Star"==t.roster[e].potential?r=100:"A"==t.roster[e].potential?r=80:"B"==t.roster[e].potential?r=70:"C"==t.roster[e].potential?r=50:"D"==t.roster[e].potential?r=10:"F"==t.roster[e].potential&&(r=-10),a=n+r-t.roster[e].age,l.push(a)}let c=0;"Star"==a[e][1].potential?c=1e3:"A"==a[e][1].potential?c=100:"B"==a[e][1].potential?c=80:"C"==a[e][1].potential?c=60:"D"==a[e][1].potential?c=10:"F"==a[e][1].potential&&(c=-10);let i=playerOverall(a[e][1])+c-a[e][1].age,o=[l[0],l[1],l[2],l[3],l[4],l[5]];o=o.sort(((e,a)=>a-e)),i>o[o.length-1]&&(n=!0,r.push(t.roster[l.indexOf(o[o.length-1])]),0!==r[0].number&&(r[0].name=r[0].name+" "+r[0].number),s.push([t.name,t.region,a[e][1].name,"Yes",{cut:r[0].name}]))}if(1==n){let n=new RegExp(`${a[e][1].name}`,"g");null!==p.match(n)?fs.writeFileSync(`./dist/src/players/active/${a[e][1].name} ${p.match(n).length+1}.txt`,`name: ${a[e][1].name}\n  power: ${a[e][1].power}\n  speed: ${a[e][1].speed}\n  eye: ${a[e][1].eye}\n  tackle: ${a[e][1].tackle}\n  breaktackle: ${a[e][1].breaktackle}\n  block: ${a[e][1].block}\n  breakblock: ${a[e][1].breakblock}\n  awareness: ${a[e][1].awareness}\n  age: ${a[e][1].age}\n  potential: ${a[e][1].potential}\n\n\n\nstats:`,{flag:"w"}):fs.writeFileSync(`./dist/src/players/active/${a[e][1].name}.txt`,`name: ${a[e][1].name}\n  power: ${a[e][1].power}\n  speed: ${a[e][1].speed}\n  eye: ${a[e][1].eye}\n  tackle: ${a[e][1].tackle}\n  breaktackle: ${a[e][1].breaktackle}\n  block: ${a[e][1].block}\n  breakblock: ${a[e][1].breakblock}\n  awareness: ${a[e][1].awareness}\n  age: ${a[e][1].age}\n  potential: ${a[e][1].potential}\n\n\n\nstats:`,{flag:"w"});let s=fs.readFileSync(`./dist/src/teams/${a[e][0]}.txt`,"utf8"),l=new RegExp("roster:[^]*stats:"),c=l.exec(s)[0];if(c=c.replace("\nstats:",""),null!==p.match(n)?(c+=`\n${a[e][1].name} ${p.match(n).length+1}`,p+=a[e][1].name):(c+=`\n${a[e][1].name}`,p+=a[e][1].name),c+="\nstats:",r.length>0){c=c.replace(`${r[0].name}\n`,"");let e=fs.readFileSync(`./dist/src/players/active/${r[0].name}.txt`,"utf8");fs.writeFileSync(`./dist/src/players/free agents/${t.region}/${r[0].name}.txt`,e,{flag:"w"}),fs.unlinkSync(`./dist/src/players/active/${r[0].name}.txt`,(e=>{})),r=[]}s=s.replace(l.exec(s)[0],c),fs.writeFileSync(`./dist/src/teams/${t.name}.txt`,s,{flag:"w"})}else s.push([t.name,t.region,a[e][1].name,"No"]),fs.writeFileSync(`./dist/src/players/free agents/${t.region}/${a[e][1].name}.txt`,`name: ${a[e][1].name}\n  power: ${a[e][1].power}\n  speed: ${a[e][1].speed}\n  eye: ${a[e][1].eye}\n  tackle: ${a[e][1].tackle}\n  breaktackle: ${a[e][1].breaktackle}\n  block: ${a[e][1].block}\n  breakblock: ${a[e][1].breakblock}\n  awareness: ${a[e][1].awareness}\n  age: ${a[e][1].age}\n  potential: ${a[e][1].potential}\n\n\n\nstats:`,{flag:"w"});n=!1}n=!1;let f=fs.readdirSync("./dist/src/players/active");p="";for(let e=0;e<f.length;e++)p+=o.exec(f[e])[1];for(let e=0;e<t.length;e++){let a=teamToObject(t[e][0]);if(a.roster.length<6)n=!0,l.push([a.name,a.region,t[e][1].name,"Yes"]);else{let s=[];for(let e=0;e<a.roster.length-1;e++){let t=0,n=playerOverall(a.roster[e]),r=0;"Star"==a.roster[e].potential?r=100:"A"==a.roster[e].potential?r=80:"B"==a.roster[e].potential?r=70:"C"==a.roster[e].potential?r=50:"D"==a.roster[e].potential?r=10:"F"==a.roster[e].potential&&(r=-10),t=n+r-a.roster[e].age,s.push(t)}let c=0;"Star"==t[e][1].potential?c=1e3:"A"==t[e][1].potential?c=100:"B"==t[e][1].potential?c=80:"C"==t[e][1].potential?c=60:"D"==t[e][1].potential?c=10:"F"==t[e][1].potential&&(c=-10);let i=playerOverall(t[e][1])+c-t[e][1].age,o=[s[0],s[1],s[2],s[3],s[4],s[5]];o=o.sort(((e,a)=>a-e)),i>o[o.length-1]&&(n=!0,r.push(a.roster[s.indexOf(o[o.length-1])]),0!==r[0].number&&(r[0].name=r[0].name+" "+r[0].number),l.push([a.name,a.region,t[e][1].name,"Yes",{cut:r[0].name}]))}if(1==n){let n=new RegExp(`${t[e][1].name}`,"g");null!==p.match(n)?fs.writeFileSync(`./dist/src/players/active/${t[e][1].name} ${p.match(n).length+1}.txt`,`name: ${t[e][1].name}\n  power: ${t[e][1].power}\n  speed: ${t[e][1].speed}\n  eye: ${t[e][1].eye}\n  tackle: ${t[e][1].tackle}\n  breaktackle: ${t[e][1].breaktackle}\n  block: ${t[e][1].block}\n  breakblock: ${t[e][1].breakblock}\n  awareness: ${t[e][1].awareness}\n  age: ${t[e][1].age}\n  potential: ${t[e][1].potential}\n\n\n\nstats:`,{flag:"w"}):fs.writeFileSync(`./dist/src/players/active/${t[e][1].name}.txt`,`name: ${t[e][1].name}\n  power: ${t[e][1].power}\n  speed: ${t[e][1].speed}\n  eye: ${t[e][1].eye}\n  tackle: ${t[e][1].tackle}\n  breaktackle: ${t[e][1].breaktackle}\n  block: ${t[e][1].block}\n  breakblock: ${t[e][1].breakblock}\n  awareness: ${t[e][1].awareness}\n  age: ${t[e][1].age}\n  potential: ${t[e][1].potential}\n\n\n\nstats:`,{flag:"w"});let s=fs.readFileSync(`./dist/src/teams/${t[e][0]}.txt`,"utf8"),l=new RegExp("roster:[^]*stats:"),c=l.exec(s)[0];if(c=c.replace("\nstats:",""),null!==p.match(n)?(c+=`\n${t[e][1].name} ${p.match(n).length+1}`,p+=t[e][1].name):(c+=`\n${t[e][1].name}`,p+=t[e][1].name),c+="\nstats:",r.length>0){c=c.replace(`${r[0].name}\n`,"");let e=fs.readFileSync(`./dist/src/players/active/${r[0].name}.txt`,"utf8");fs.writeFileSync(`./dist/src/players/free agents/${a.region}/${r[0].name}.txt`,e,{flag:"w"}),fs.unlinkSync(`./dist/src/players/active/${r[0].name}.txt`,(e=>{})),r=[]}s=s.replace(l.exec(s)[0],c),fs.writeFileSync(`./dist/src/teams/${a.name}.txt`,s,{flag:"w"})}else l.push([a.name,a.region,t[e][1].name,"No"]),fs.writeFileSync(`./dist/src/players/free agents/${a.region}/${t[e][1].name}.txt`,`name: ${t[e][1].name}\n  power: ${t[e][1].power}\n  speed: ${t[e][1].speed}\n  eye: ${t[e][1].eye}\n  tackle: ${t[e][1].tackle}\n  breaktackle: ${t[e][1].breaktackle}\n  block: ${t[e][1].block}\n  breakblock: ${t[e][1].breakblock}\n  awareness: ${t[e][1].awareness}\n  age: ${t[e][1].age}\n  potential: ${t[e][1].potential}\n\n\n\nstats:`,{flag:"w"});n=!1}return c=[s,l],c}function freeAgentSigning(e){let a=e,t=[a.american,a.hispanic,a.chinese,a.japanese,a.italian,a.german,a.french,a.easterneuro,a.korean,a.vietnamese,a.indian,a.arabic,a.subsaharan,a.greek,a.scandinavian],n=Object.keys(a),r=[],s=[],l=[],c=[];for(let e=0;e<4;e++)for(let a=0;a<t.length;a++){let i=fs.readdirSync(`./dist/src/players/free agents/${n[a]}`),o=[],p=new RegExp(/(.+)(\d?\d?\d?).txt/);for(let e=0;e<i.length;e++){let t=p.exec(i[e])[1],r=playerToObject(t,`${n[a]}`);r.overall=playerOverall(r),r.filename=p.exec(i[e])[0],o.push(r)}for(let i=t[a].length-1;i>=0;i--){let p=teamToObject(t[a][i]);if(!(p.roster.length>=6)){let f=rookieSelect(o);0===e?r.push([t[a][i],f,n[a]]):1===e?s.push([t[a][i],f,n[a]]):2===e?l.push([t[a][i],f,n[a]]):c.push([t[a][i],f,n[a]]);let g=o.slice(0,o.indexOf(f)),d=o.slice(o.indexOf(f)+1);o=g.concat(d);let k=fs.readdirSync("./dist/src/players/active"),h=new RegExp(/(.+).txt/),m="";for(let e=0;e<k.length;e++)m+=h.exec(k[e])[1];let $=0,b=f.name,u=new RegExp(`${f.name}`,"g");null!==m.match(u)&&($=m.match(u).length),0!==$&&(b=`${f.name} ${$+1}`,m+=b);let y=fs.readFileSync(`./dist/src/teams/${p.name}.txt`,"utf8"),w=fs.readFileSync(`./dist/src/players/free agents/${p.region}/${f.filename}`,"utf8"),x=new RegExp("roster:[^]*stats:"),S=x.exec(y)[0];S=S.replace("\nstats:",""),S+=`\n${b}`,S+="\nstats:",y=y.replace(x.exec(y)[0],S),fs.writeFileSync(`./dist/src/teams/${p.name}.txt`,y,{flag:"w"}),fs.writeFileSync(`./dist/src/players/active/${b}.txt`,w,{flag:"w"}),fs.unlinkSync(`./dist/src/players/free agents/${p.region}/${f.filename}`)}}}return[r,s,l,c]}function runOffseason(){let e=draftOrder(),a=retirement(),t=playerProgression(),n=createDraftClasses(),r={american:[],hispanic:[],chinese:[],japanese:[],italian:[],german:[],french:[],easterneuro:[],korean:[],vietnamese:[],indian:[],arabic:[],subsaharan:[],greek:[],scandinavian:[]},s={american:[],hispanic:[],chinese:[],japanese:[],italian:[],german:[],french:[],easterneuro:[],korean:[],vietnamese:[],indian:[],arabic:[],subsaharan:[],greek:[],scandinavian:[]},l=Object.keys(n);for(let e=0;e<l.length;e++)for(let a=0;a<n[l[e]].length;a++)r[l[e]].push(n[l[e]][a]);let c=Object.keys(e);for(let a=0;a<c.length;a++)for(let t=0;t<e[c[a]].length;t++)s[c[a]].push(e[c[a]][t]);let i=draft(n,e),o=signDraftees(i),p=freeAgentSigning(e);season+=1,fs.writeFileSync("./dist/src/tracker/tracker.txt",`${season}`,{flag:"w"}),statblockAdder(season);let f=[a,t,r,i,o,p,s];return fs.writeFileSync("./dist/src/records/Entry/Teams.txt","",{flag:"w"}),fs.writeFileSync("./dist/src/records/Middle/Teams.txt","",{flag:"w"}),fs.writeFileSync("./dist/src/records/Transitional/Teams.txt","",{flag:"w"}),fs.writeFileSync("./dist/src/records/Premier/Teams.txt","",{flag:"w"}),fs.mkdirSync(`./dist/src/games history/${season}`),fs.mkdirSync(`./dist/src/games history/${season}/Entry`),fs.mkdirSync(`./dist/src/games history/${season}/Transitional`),fs.mkdirSync(`./dist/src/games history/${season}/Middle`),fs.mkdirSync(`./dist/src/games history/${season}/Premier`),f}export{runOffseason};